# ドキュメント更新フェーズ - レビュープロンプト

## レビュー対象

### ドキュメント更新ログ
{documentation_update_log_path}

### 更新されたプロジェクトドキュメント
（レビュー時に更新されたドキュメントを確認）

### 各フェーズ成果物（参考）
- Phase 1: {requirements_document_path}
- Phase 2: {design_document_path}
- Phase 3: {test_scenario_document_path}
- Phase 4: {implementation_document_path}
- Phase 5: {test_result_document_path}

## 品質ゲート（Phase 6: Documentation）

ドキュメント更新は以下の品質ゲートをクリアする必要があります：

- [ ] **影響を受けるドキュメントが特定されている**
- [ ] **必要なドキュメントが更新されている**
- [ ] **更新内容が記録されている**

## ⚠️ 重要: Planning Phaseチェックリストとの照合（必須）

### 1. Planning.mdの読み込み

以下のファイルを読み込んでください：
- {planning_document_path}

### 2. 該当フェーズのチェックリストを抽出

Planning.mdから、現在のフェーズ（"### Phase 7:" または "## Phase 7:"）のセクションを見つけ、タスクチェックリストを抽出してください。

**注意**: チェックリストが見つからない場合は、このチェックをスキップしてください。

### 3. ドキュメント更新内容との照合

ドキュメント更新ログ（documentation.md）と照合し、各タスクが完了しているかチェックしてください。

**完了の判定基準**:
- Task記載のドキュメントファイルが更新されているか
- Task記載の更新内容が反映されているか
- サブタスクがすべて完了しているか

### 4. Planning.mdの更新

照合結果に基づき、planning.mdのチェックボックスを更新してください：

- 完了したタスク: `- [ ]` → `- [x]`
- 未完了のタスク: `- [ ]` のまま

**Editツールを使用**して、該当フェーズのセクションを更新してください。

### 5. レビュー判定への反映

- **すべてのタスクが完了**（全て `[x]`）: PASS または PASS_WITH_SUGGESTIONS
- **未完了タスクがある**（`[ ]` が残っている）: FAIL
  - レビューフィードバックに未完了タスクをリストアップ
  - 具体的に何が不足しているか説明

**例（FAIL時のフィードバック）**:
```
## Planning Phaseチェックリスト照合結果: FAIL

以下のタスクが未完了です：

- [ ] Task 7-2: README.mdの更新
  - 不足: README.mdに新機能の説明が追加されていません
- [ ] Task 7-3: API仕様書の更新
  - 不足: docs/api.md が更新されていません

これらのタスクを完了してから再提出してください。
```

### ⚠️ 重要: Planning.mdの内容はレビュー結果に含めない

Planning.mdの読み込みと照合作業は必要ですが、**planning.mdの全文やPlanning Phaseのレビュー内容をレビュー結果に含めないでください**。

レビュー結果には以下のみを含めること:
- ドキュメント更新ログ（documentation-update-log.md）に対する評価
- Planning.mdとの照合で発見した未完了タスク（FAIL時のみ）
- ドキュメント更新固有の改善提案

Planning Phaseのレビュー詳細やplanning.mdの内容全体は出力しないこと。

## レビュー姿勢

このレビューは「**80点で十分**」の原則に基づいて実施してください：

1. **完璧ではなく、十分を目指す**
   - すべてのドキュメントが完璧である必要はない
   - 主要なドキュメントが更新されていれば合格
   - 細かい改善点は改善提案として記載

2. **ブロッカーと改善提案を明確に区別**
   - ブロッカー: 重要なドキュメントが更新されていない、または更新内容が不適切
   - 改善提案: より良いドキュメントにするための提案

3. **実用的でバランスの取れた判断**
   - ユーザーが困らないことを最優先
   - 主要な変更が文書化されていれば合格

4. **建設的なフィードバック**
   - 不足を指摘するだけでなく、具体的な改善案を提示
   - 良い点も評価

## レビュー観点

### 1. ドキュメント探索の完全性（最重要）

- プロジェクト内の.mdファイルが網羅的に調査されているか
- .ai-workflowディレクトリが適切に除外されているか
- 調査したドキュメントが更新ログに記録されているか

### 2. 更新判断の妥当性

- 更新すべきドキュメントが正しく識別されているか
- 更新不要と判断したドキュメントの理由が妥当か
- 重要な変更が見落とされていないか

### 3. 更新内容の適切性

- 既存のスタイル・フォーマットが維持されているか
- 変更内容が簡潔で明確か
- 情報が正確か（Phase 2, 4の内容と整合しているか）
- ユーザーにとって有用な情報か

### 4. 更新ログの品質

- 更新理由が明確に記載されているか
- 変更内容が箇条書きで整理されているか
- 更新不要の判断理由が記載されているか

## ブロッカー（BLOCKER）と改善提案（SUGGESTION）の区別

### ブロッカー（BLOCKER）: 次フェーズに進めない重大な問題

**ブロッカーの例**:
- プロジェクトドキュメントが全く探索されていない
- 明らかに更新が必要なドキュメント（README.md等）が見落とされている
- 更新内容が既存スタイルを大きく壊している
- 更新内容に重大な誤りがある
- 更新ログが存在しない、または内容が不十分

### 改善提案（SUGGESTION）: 次フェーズに進めるが、改善が望ましい事項

**改善提案の例**:
- 一部のマイナーなドキュメントの更新漏れ
- 更新内容の説明をより詳しくできる
- フォーマットの細かい改善
- 更新ログの表現の改善

## 出力フォーマット

以下の形式で出力してください：

```markdown
## 品質ゲート評価

- [x/  ] **影響を受けるドキュメントが特定されている**: PASS/FAIL - （コメント）
- [x/  ] **必要なドキュメントが更新されている**: PASS/FAIL - （コメント）
- [x/  ] **更新内容が記録されている**: PASS/FAIL - （コメント）

## 詳細レビュー

### 1. ドキュメント探索の完全性

**良好な点**:
- （具体的な良い点）

**懸念点**:
- （懸念があれば記載）

### 2. 更新判断の妥当性

**良好な点**:
- （具体的な良い点）

**懸念点**:
- （懸念があれば記載）

### 3. 更新内容の適切性

**良好な点**:
- （具体的な良い点）

**改善の余地**:
- （改善提案があれば記載）

### 4. 更新ログの品質

**良好な点**:
- （具体的な良い点）

**改善の余地**:
- （改善提案があれば記載）

## ブロッカー（BLOCKER）

**次フェーズに進めない重大な問題**

（ブロッカーがある場合のみ記載）
1. **（ブロッカー1のタイトル）**
   - 問題: （具体的な問題）
   - 影響: （なぜ問題か）
   - 対策: （どう修正すべきか）

## 改善提案（SUGGESTION）

**より良いドキュメント更新にするための提案**

（改善提案がある場合のみ記載）
1. **（提案1のタイトル）**
   - 現状: （現在の状態）
   - 提案: （こうすればより良い）
   - 効果: （改善による効果）

## 総合評価

（ドキュメント更新全体の総合的な評価）

**主な強み**:
- （良い点をまとめる）

**主な改善提案**:
- （改善提案をまとめる）

（総括コメント）

---
**判定: PASS / PASS_WITH_SUGGESTIONS / FAIL**
```

## レビュー実施

上記フォーマットに従って、ドキュメント更新のクリティカルシンキングレビューを実施してください。

## ⚠️ 重要: 判定の出力は必須

**レビュー結果の最後に、必ず以下のいずれかの形式で判定を出力してください：**

```
---
**判定: PASS**
```

または

```
---
**判定: PASS_WITH_SUGGESTIONS**
```

または

```
---
**判定: FAIL**
```

**この判定がないと、レビュー結果が正しく処理されません。必ず3つのいずれかの判定を、上記の正確な形式で明示的に出力してください。**
