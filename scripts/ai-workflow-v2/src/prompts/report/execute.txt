# レポート作成フェーズ - 実行プロンプト

## タスク概要
Phase 1-7の全成果物をまとめて、マージ判断用の最終レポートを作成してください。このレポートは、人間がPRをマージするかどうかを判断するための情報をすべて含みます。

## 入力情報

### Planning Phase成果物
- Planning Document: {planning_document_path}

**注意**: Planning Phaseが実行されている場合、開発計画（実装戦略、テスト戦略、リスク、スケジュール）を必ず確認してください。

### 要件定義書（利用可能な場合）
{requirements_context}
<!--
  存在する場合: @requirements.md への参照
  存在しない場合: "要件定義書は利用できません。Issue情報から要件を推測してください。"
-->

### 設計書（利用可能な場合）
{design_context}
<!--
  存在する場合: @design.md への参照
  存在しない場合: "設計書は利用できません。Issue情報から設計内容を推測してください。"
-->

### 実装ログ（利用可能な場合）
{implementation_context}
<!--
  存在する場合: @implementation.md への参照
  存在しない場合: "実装ログは利用できません。リポジトリの実装内容を確認してください。"
-->

### テスト結果（利用可能な場合）
{testing_context}
<!--
  存在する場合: @test-result.md への参照
  存在しない場合: "テスト結果は利用できません。実装内容から推測してください。"
-->

### ドキュメント更新ログ（利用可能な場合）
{documentation_context}
<!--
  存在する場合: @documentation-update-log.md への参照
  存在しない場合: "ドキュメント更新ログは利用できません。"
-->

### テストシナリオ（参考・利用可能な場合）
{test_scenario_context}

### テスト実装ログ（参考・利用可能な場合）
{test_implementation_context}

## レポート作成手順

### 1. エグゼクティブサマリーの作成

簡潔に全体を要約してください：

```markdown
# エグゼクティブサマリー

## 実装内容
（何を実装したかを1-2文で）

## ビジネス価値
（このPRがビジネスにもたらす価値）

## 技術的な変更
（技術的な変更の概要）

## リスク評価
- **高リスク**: （あれば記載）
- **中リスク**: （あれば記載）
- **低リスク**: （通常の変更）

## マージ推奨
✅ マージ推奨 / ⚠️ 条件付き推奨 / ❌ マージ非推奨
```

### 2. 変更内容の詳細

各フェーズの重要な情報を抜粋してください：

```markdown
# 変更内容の詳細

## 要件定義（Phase 1）
（要件定義書から重要な要件を抜粋）

- 機能要件: （主要な機能要件）
- 受け入れ基準: （主要な受け入れ基準）
- スコープ: （含まれるもの/含まれないもの）

## 設計（Phase 2）
（設計書から重要な設計判断を抜粋）

- 実装戦略: {implementation_strategy}
- テスト戦略: {test_strategy}
- 変更ファイル:
  - 新規作成: X個
  - 修正: Y個

## テストシナリオ（Phase 3）
（テストシナリオから重要なテストケースを抜粋）

- Unitテスト: （主要なテストケース）
- Integrationテスト: （主要なテストケース）
- BDDシナリオ: （主要なシナリオ）

## 実装（Phase 4）
（実装ログから実装内容を抜粋）

### 新規作成ファイル
- `path/to/file1.py`: （説明）
- `path/to/file2.py`: （説明）

### 修正ファイル
- `path/to/existing_file.py`: （変更内容）

### 主要な実装内容
（コア機能の実装内容を簡潔に説明）

## テストコード実装（Phase 5）
（テスト実装ログから実装内容を抜粋）

### テストファイル
- `tests/test_xxx.py`: （説明）

### テストケース数
- ユニットテスト: X個
- インテグレーションテスト: Y個
- 合計: Z個

## テスト結果（Phase 6）
（テスト結果から重要な情報を抜粋）

- 総テスト数: X個
- 成功: Y個
- 失敗: Z個
- テスト成功率: W%

### 失敗したテスト
（失敗があれば記載、なければ「すべて成功」）

## ドキュメント更新（Phase 7）
（ドキュメント更新ログから重要な情報を抜粋）

### 更新されたドキュメント
（更新されたドキュメントのリスト）

### 更新内容
（主要な更新内容を簡潔に説明）
```

### 3. マージチェックリスト

マージ前に確認すべき項目をリストアップしてください：

```markdown
# マージチェックリスト

## 機能要件
- [ ] 要件定義書の機能要件がすべて実装されている
- [ ] 受け入れ基準がすべて満たされている
- [ ] スコープ外の実装は含まれていない

## テスト
- [ ] すべての主要テストが成功している
- [ ] テストカバレッジが十分である
- [ ] 失敗したテストが許容範囲内である

## コード品質
- [ ] コーディング規約に準拠している
- [ ] 適切なエラーハンドリングがある
- [ ] コメント・ドキュメントが適切である

## セキュリティ
- [ ] セキュリティリスクが評価されている
- [ ] 必要なセキュリティ対策が実装されている
- [ ] 認証情報のハードコーディングがない

## 運用面
- [ ] 既存システムへの影響が評価されている
- [ ] ロールバック手順が明確である
- [ ] マイグレーションが必要な場合、手順が明確である

## ドキュメント
- [ ] README等の必要なドキュメントが更新されている
- [ ] 変更内容が適切に記録されている
```

### 4. リスク評価と推奨事項

マージに関するリスクと推奨事項を記載してください：

```markdown
# リスク評価と推奨事項

## 特定されたリスク

### 高リスク
（高リスク項目があれば記載）

### 中リスク
（中リスク項目があれば記載）

### 低リスク
（低リスク項目を記載）

## リスク軽減策
（各リスクに対する軽減策）

## マージ推奨

**判定**: ✅ マージ推奨 / ⚠️ 条件付き推奨 / ❌ マージ非推奨

**理由**:
（判定の理由を記載）

**条件**（条件付き推奨の場合）:
- （マージ前に満たすべき条件）
```

### 5. 次のステップ

マージ後に必要なアクションを記載してください：

```markdown
# 次のステップ

## マージ後のアクション
1. （必要なアクション1）
2. （必要なアクション2）

## フォローアップタスク
- （将来的に対応すべきタスク）
- （改善提案として記録されたタスク）
```

## 品質ゲート（Phase 8: Report）

レポートは以下の品質ゲートを満たす必要があります：

- [ ] **変更内容が要約されている**
- [ ] **マージ判断に必要な情報が揃っている**
- [ ] **動作確認手順が記載されている**

これらの品質ゲートは**必須要件**です。作成後、クリティカルシンキングレビューが実施されます。

## 出力形式

最終レポートを `.ai-workflow/issue-{issue_number}/08_report/output/report.md` として保存してください。

Markdown形式で、見出しを適切に使用し、可読性の高いレポートを作成してください。

## 注意事項

1. **簡潔性**: 長すぎないこと
   - エグゼクティブサマリーは1ページ以内
   - 詳細は要点のみ抜粋

2. **客観性**: 事実に基づく記載
   - 感情的な表現を避ける
   - データに基づく評価

3. **実用性**: マージ判断に必要な情報に絞る
   - 不要な詳細は省略
   - チェックリストを活用

4. **レビューされることを意識**: レポートはクリティカルシンキングレビューが実施されます
   - 品質ゲート（3つの必須要件）を満たすこと
   - マージ判断に必要な情報が揃っていること

## レポート作成開始

上記を踏まえ、最終レポートを作成してください。
