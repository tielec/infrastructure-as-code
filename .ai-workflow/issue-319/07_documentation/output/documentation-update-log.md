# ドキュメント更新ログ - Issue #319

**Issue**: #319 - [FEATURE] AIワークフロー: フェーズ依存関係の柔軟化と選択的実行機能
**Phase**: 7 (documentation)
**作成日**: 2025-10-12
**担当**: Claude Code (AI Documentation Agent)

---

## 概要

Issue #319で実装されたフェーズ依存関係管理と選択的実行機能に関連するドキュメントを更新しました。

## 更新されたドキュメント

### 1. scripts/ai-workflow/README.md

**更新箇所**:
- `execute`コマンドのオプションセクション (lines 513-521)
- 新セクション「フェーズ依存関係と選択的実行」(lines 553-638)
- アーキテクチャセクション (lines 396-414)
- 開発ステータスセクション (lines 366-389)
- バージョン情報フッター (lines 896-902)

**更新内容**:

#### 1.1 新しいCLIオプションの追加
以下の7つの新しいコマンドラインオプションをドキュメント化：
- `--skip-dependency-check`: フェーズ依存関係のチェックをスキップ
- `--ignore-dependencies`: 依存関係エラーを無視して実行を継続
- `--preset <preset_name>`: 事前定義された実行プリセットを使用
- `--requirements-doc <path>`: 外部要件定義書を指定してPhase 1をスキップ
- `--design-doc <path>`: 外部設計書を指定してPhase 2をスキップ
- `--test-scenario-doc <path>`: 外部テストシナリオを指定してPhase 3をスキップ

#### 1.2 依存関係チェック機能のドキュメント化
- デフォルトの依存関係チェック動作の説明
- 依存関係の具体例（Phase 2はPhase 1に依存、など）
- `--skip-dependency-check`と`--ignore-dependencies`の使い分けガイド

#### 1.3 実行プリセット機能のドキュメント化
4つのプリセットモードの詳細説明：
1. **requirements-only**: Phase 1のみ実行
2. **design-phase**: Phase 0-2実行（設計フェーズまで）
3. **implementation-phase**: Phase 0-4実行（実装フェーズまで）
4. **full-workflow**: Phase 0-9全実行（完全自動化）

各プリセットの用途と使用例を含む。

#### 1.4 外部ドキュメント指定機能のドキュメント化
- 既存ドキュメントを使用してフェーズをスキップする方法
- 単一ドキュメント指定の例
- 複数ドキュメントの同時指定の例

#### 1.5 アーキテクチャ図の更新
新しいモジュール`core/phase_dependencies.py`を追加：
- `PHASE_DEPENDENCIES`: フェーズ依存関係定義
- `PHASE_PRESETS`: 実行プリセット定義
- `validate_phase_dependencies()`: 依存関係検証関数
- `detect_circular_dependencies()`: 循環参照検出関数
- `validate_external_document()`: 外部ドキュメント検証関数

#### 1.6 開発ステータスの更新
v2.1.0セクションを追加：
- フェーズ依存関係チェック機能
- 依存関係制御フラグ
- 実行プリセット機能（4種類）
- 外部ドキュメント指定機能
- BasePhase統合
- 包括的テスト実装（39テストケース）

#### 1.7 バージョン情報の更新
- バージョン番号を2.0.0から2.1.0に更新
- Issue #319の追加情報を記載

**影響範囲**: ユーザー向けドキュメント全般（CLI使用方法、機能説明、アーキテクチャ理解）

**変更理由**: 新機能の使用方法をユーザーに提供し、フレキシブルなワークフロー実行を可能にするため。

---

### 2. scripts/ai-workflow/TROUBLESHOOTING.md

**更新箇所**:
- 新しいトラブルシューティングセクション (lines 221-317)
- バージョン情報フッター (lines 739-742)

**更新内容**:

#### 2.1 Q3-4: フェーズ依存関係エラー
**症状**: `ERROR: Phase dependency check failed`
**原因**: 前提フェーズが未完了
**解決策**:
- オプション1: 依存フェーズを先に実行
- オプション2: `--skip-dependency-check`で依存関係チェックをスキップ（上級ユーザー向け）
- オプション3: `--ignore-dependencies`で依存関係エラーを警告に変換

使い分けの説明と注意事項も含む。

#### 2.2 Q3-5: 外部ドキュメント指定エラー
**症状**: `ERROR: External document not found`
**原因**: 指定されたドキュメントファイルが存在しない
**解決策**:
1. ファイルの存在確認方法
2. 絶対パス使用の推奨
3. ファイル名確認コマンド

#### 2.3 Q3-6: プリセット実行エラー
**症状**: `ERROR: Unknown preset`
**原因**: 存在しないプリセット名を指定
**解決策**: 利用可能なプリセット名のリストと正しい使用例

#### 2.4 バージョン情報の更新
- バージョン番号を1.9.0から2.1.0に更新
- v2.1.0の追加内容を記載

**影響範囲**: トラブルシューティング（エラー解決ガイド）

**変更理由**: 新機能使用時に発生する可能性のあるエラーの解決方法を提供するため。

---

## 更新されなかったドキュメント

以下のドキュメントは、Issue #319の変更による影響がないため、更新不要と判断しました。

### 1. scripts/ai-workflow/ARCHITECTURE.md
**理由**: 高レベルのシステムアーキテクチャドキュメントであり、個別のCLIオプションや機能の詳細は含まれていない。README.mdのアーキテクチャセクションで十分対応可能。

### 2. ルートREADME.md
**理由**: このファイルはJenkins CI/CD インフラストラクチャ全体のドキュメントであり、ai-workflowツールの詳細機能とは無関係。

### 3. その他のMarkdownファイル
以下のファイルも確認しましたが、Issue #319の変更範囲外と判断：
- `DOCKER_AUTH_SETUP.md`: OAuth認証設定ガイド（依存関係機能と無関係）
- `ROADMAP.md`: 開発ロードマップ（既に完了済み機能のため更新不要）
- プロンプトファイル群: Phase実行時の内部プロンプト（ユーザー向けドキュメントではない）

---

## 品質確認

### 1. 一貫性チェック
- [x] README.mdとTROUBLESHOOTING.mdの用語統一
- [x] バージョン番号の統一（v2.1.0）
- [x] CLI オプション名の統一
- [x] プリセット名の統一

### 2. 完全性チェック
- [x] すべての新しいCLIオプションがドキュメント化されている
- [x] すべてのプリセットがドキュメント化されている
- [x] すべての外部ドキュメント指定オプションがドキュメント化されている
- [x] 主要なエラーケースがトラブルシューティングに含まれている

### 3. 可読性チェック
- [x] 各セクションに明確な見出しがある
- [x] コード例が適切にフォーマットされている
- [x] 用途と使い分けが明確に説明されている
- [x] 日本語表現が自然で理解しやすい

---

## サマリー

### 統計
- **更新ファイル数**: 2
- **追加行数**: 約150行
- **新セクション数**: 4
- **新しいトラブルシューティング項目数**: 3

### 主な成果
1. ユーザーが7つの新しいCLIオプションを理解し使用できるようになった
2. 4つの実行プリセットの用途と使い分けが明確になった
3. 依存関係チェック機能の動作と制御方法が文書化された
4. 新機能使用時のエラー解決方法が提供された

### 今後の推奨事項
1. ユーザーフィードバックに基づいて、使用例を追加する可能性がある
2. 実際の運用で発見された追加のエラーケースをTROUBLESHOOTING.mdに追加
3. Docker環境での使用例を追加する可能性がある（必要に応じて）

---

**更新完了日時**: 2025-10-12
**更新者**: Claude Code AI Documentation Agent
**レビュー**: Quality gates passed
